#!/bin/bash

clear
# Run the program in Mutual-program directory
# If you do the make for each of the software before this you could eliminate the make lines.
# Remember to change the paths, and also the output directory.
# Strongly Recomend if you are going to use the same output directory, delete the previous data, in case it's not rewritten

# REQUIRED have the script in the same folder that includes Mutual, Oases, and blast. Links will be provided in the README.md

PATH=$PATH:~/Mutual/Mutual-program/mutual:~/Mutual/Mutual-program/mutual/bin

echo "Start" > time.txt
date >> time.txt
#change to oases to create graph
cd oases/velvet


# VELVET
#create the running scripts
make clean
make 

#First ./velveth [output directory] [size of kmer] [format of file] [Read-type] [file input]
./velveth /home/kevin/Mutual/TestMutual/OrganismA/ 25 -fastq -short /home/kevin/Mutual/TestMutual/0Hour_ATCACG_L002_R1_001.fastq 
./velveth /home/kevin/Mutual/TestMutual/OrganismB/ 25 -fastq -short /home/kevin/Mutual/TestMutual/0Hour_ATCACG_L002_R1_001.fastq  

#Then ./velvetg [path of velveth output] -read_trkg yes
./velvetg /home/kevin/Mutual/TestMutual/OrganismA -read_trkg yes
./velvetg /home/kevin/Mutual/TestMutual/OrganismB -read_trkg yes

#OASES
cd ..
make clean 
make

#Run oases for both organisms 
#./oases [path to output of velvet]
./oases /home/kevin/Mutual/TestMutual/OrganismA
./oases /home/kevin/Mutual/TestMutual/OrganismB

cd ..
echo "Start Mutual" >> time.txt
date >> time.txt

#MUTUAL
 
cd mutual
make clean
make

#Now we compare both outputs:


./mutual prefixa=/home/kevin/Mutual/TestMutual/OrganismA/ prefixb=/home/kevin/Mutual/TestMutual/OrganismB kmera=25 kmerb=25 blast_path=/home/kevin/Mutual/Mutual-program/blast threads=8

cd ..
echo "End Mutual">> time.txt
date >> time.txt


